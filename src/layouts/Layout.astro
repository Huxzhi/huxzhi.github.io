---
import Footer from '@/components/Footer.astro'
import Header from '@/components/Header.astro'
import { ClientRouter } from 'astro:transitions'
import config from 'urodele.config'
import '../styles.css'
import '../styles/task-list.css'

interface Props {
  title?: string
  description?: string
}

const { title, description } = Astro.props
---

<!doctype html>
<html lang="cn">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="144x144"
      href="/favicon.png"
    />
    <meta
      name="apple-mobile-web-app-capable"
      content="yes"
    />
    <meta
      name="mobile-web-app-capable"
      content="yes"
    />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta
      name="apple-mobile-web-app-title"
      content={config.head.brand}
    />
    <meta
      name="msapplication-TileColor"
      content="#000000"
    />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta
      name="description"
      content={description || config.head.description}
    />
    <meta
      name="generator"
      content={Astro.generator}
    />
    <title>{title || config.head.title}</title>
    <ClientRouter />
  </head>
  <body style="background-color: var(--color-bg);">
    <!-- Header Navigation (includes Auth) -->
    <Header />

    <!-- Main Content (provided by child layouts) -->

    <div
      class="min-h-screen grid mx-auto gap-6 py-6 px-4 md:grid-cols-[240px_1fr] md:max-w-5xl xl:grid-cols-[240px_1fr_240px] xl:max-w-7xl"
    >
      <div style="display:block; grid-column-start:1; grid-column-end:1; order:-1; min-width:0; height:0; max-height:0;"></div>
      <main class="flex flex-col order-first md:order-0 min-w-0">
        <slot />
      </main>
      <aside class="order-last hidden md:block md:order-first">
        <slot name="left" />
      </aside>
      <aside class="max-xl:hidden">
        <slot name="right" />
      </aside>
    </div>

    <Footer />
  </body>
</html>
