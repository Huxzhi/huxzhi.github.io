---
import Layout from './Layout.astro'

import { getCollection } from 'astro:content'

interface Props {
  title: string
  description?: string
  postSlug: string
  headings: any[]
  tags: string[]
}

const { title, description, postSlug, headings, tags } = Astro.props

// Load related posts
const allPosts = await getCollection('posts')

// Use consolidated site stats (cached)
import SidebarLeftForPost from '../components/Post/SidebarLeftForPost.astro'
import SidebarRightForPost from '../components/Post/SidebarRightForPost.astro'
---

<Layout
  title={title}
  description={description}
>
  <!-- Main Content -->
  <main class="space-y-6 flex flex-col order-first md:order-0 min-w-0">
    <slot />
  </main>

  <!-- Left Sidebar - ToC -->
  <SidebarLeftForPost
    slot="left"
    headings={headings}
  />

  <!-- Right Sidebar - Related Posts -->
  <SidebarRightForPost
    slot="right"
    postSlug={postSlug}
  />
</Layout>
