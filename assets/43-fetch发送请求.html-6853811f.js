const n=JSON.parse(`{"key":"v-50cc30d7","path":"/code/react/React18/43-fetch%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82.html","title":"43-fetch发送请求","lang":"zh-CN","frontmatter":{"category":["react18"],"date":"2023-03-18 09:34","title":"43-fetch发送请求","updated":"2023-05-13 22:56","description":"43-fetch 发送请求 组件初始化时需要向服务器发送请求来加载数据 fetch() 用来向服务器发送请求加载数据，是 Ajax 的升级版 它需要两个参数：1.请求地址 2.请求信息 const App = () =&gt; { const [stuData, setStuData] = useState([]); useEffect(() =&gt; { // 在effect中加载数据 fetch('http://localhost:1337/api/students') .then((res) =&gt; { return res.json();// 该方法可以将响应的json直接转换为js对象 }) .then(data =&gt; { // 将加载到的数据设置到state中 setStuData(data.data); }) .catch(() =&gt; { }); }, []); return ( &lt;div className=\\"app\\"&gt; &lt;StudentList stus={stuData}/&gt; &lt;/div&gt; ); }; export default App;","head":[["meta",{"property":"og:url","content":"https://huxzhi.github.io/code/react/React18/43-fetch%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82.html"}],["meta",{"property":"og:site_name","content":"Huxzhiの小站"}],["meta",{"property":"og:title","content":"43-fetch发送请求"}],["meta",{"property":"og:description","content":"43-fetch 发送请求 组件初始化时需要向服务器发送请求来加载数据 fetch() 用来向服务器发送请求加载数据，是 Ajax 的升级版 它需要两个参数：1.请求地址 2.请求信息 const App = () =&gt; { const [stuData, setStuData] = useState([]); useEffect(() =&gt; { // 在effect中加载数据 fetch('http://localhost:1337/api/students') .then((res) =&gt; { return res.json();// 该方法可以将响应的json直接转换为js对象 }) .then(data =&gt; { // 将加载到的数据设置到state中 setStuData(data.data); }) .catch(() =&gt; { }); }, []); return ( &lt;div className=\\"app\\"&gt; &lt;StudentList stus={stuData}/&gt; &lt;/div&gt; ); }; export default App;"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-24T09:20:32.000Z"}],["meta",{"property":"article:published_time","content":"2023-03-18T09:34:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-06-24T09:20:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"43-fetch发送请求\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-18T09:34:00.000Z\\",\\"dateModified\\":\\"2023-06-24T09:20:32.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"处理错误","slug":"处理错误","link":"#处理错误","children":[]},{"level":2,"title":"其他类型请求","slug":"其他类型请求","link":"#其他类型请求","children":[]}],"git":{"createdTime":1679501467000,"updatedTime":1687598432000,"contributors":[{"name":"Huxzhi","email":"huxzhi@gmail.com","commits":4}]},"readingTime":{"minutes":2.64,"words":791},"filePathRelative":"code/react/React18/43-fetch发送请求.md","localizedDate":"2023年3月18日","excerpt":"<h1> 43-fetch 发送请求</h1>\\n<p>组件初始化时需要向服务器发送请求来加载数据</p>\\n<p>fetch() 用来向服务器发送请求加载数据，是 Ajax 的升级版\\n它需要两个参数：1.请求地址 2.请求信息</p>\\n<div class=\\"language-jsx line-numbers-mode\\" data-ext=\\"jsx\\"><pre class=\\"language-jsx\\"><code><span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">App</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token keyword\\">const</span> <span class=\\"token punctuation\\">[</span>stuData<span class=\\"token punctuation\\">,</span> setStuData<span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">useState</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    <span class=\\"token function\\">useEffect</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// 在effect中加载数据</span>\\n        <span class=\\"token function\\">fetch</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'http://localhost:1337/api/students'</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">then</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">res</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">return</span> res<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">json</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span><span class=\\"token comment\\">// 该方法可以将响应的json直接转换为js对象</span>\\n            <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">then</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">data</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token comment\\">// 将加载到的数据设置到state中</span>\\n                <span class=\\"token function\\">setStuData</span><span class=\\"token punctuation\\">(</span>data<span class=\\"token punctuation\\">.</span>data<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">catch</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">(</span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span> <span class=\\"token attr-name\\">className</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>app<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token plain-text\\">\\n            </span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span><span class=\\"token class-name\\">StudentList</span></span> <span class=\\"token attr-name\\">stus</span><span class=\\"token script language-javascript\\"><span class=\\"token script-punctuation punctuation\\">=</span><span class=\\"token punctuation\\">{</span>stuData<span class=\\"token punctuation\\">}</span></span><span class=\\"token punctuation\\">/&gt;</span></span><span class=\\"token plain-text\\">\\n        </span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> App<span class=\\"token punctuation\\">;</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{},"autoDesc":true}`);export{n as data};
