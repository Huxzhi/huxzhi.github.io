const n=JSON.parse(`{"key":"v-526b6ca5","path":"/code/react/React-demo/1c-NeedAuth.html","title":"1c-NeedAuth","lang":"zh-CN","frontmatter":{"category":["react18"],"date":"2023-03-22 16:41","title":"1c-NeedAuth","updated":"2023-03-22 17:24","description":"01c-NeedAuth 简易版的 路由守卫，没有权限就重定向 在需要权限的页面，用该组件 包裹起来 import React from 'react'; import {useSelector} from \\"react-redux\\"; import {Navigate, useLocation} from \\"react-router-dom\\"; const NeedAuth = props =&gt; { const auth = useSelector(state =&gt; state.auth); //保存当前路径 const location = useLocation(); return auth.isLogged ? props.children : //没有登录就返回到之前的页面 重定向标签 &lt;Navigate to={\\"/auth-form\\"} replace //设置跳转前的路径位置 state={{preLocation: location}} /&gt;; }; export default NeedAuth;","head":[["meta",{"property":"og:url","content":"https://huxzhi.github.io/code/react/React-demo/1c-NeedAuth.html"}],["meta",{"property":"og:site_name","content":"Huxzhiの小站"}],["meta",{"property":"og:title","content":"1c-NeedAuth"}],["meta",{"property":"og:description","content":"01c-NeedAuth 简易版的 路由守卫，没有权限就重定向 在需要权限的页面，用该组件 包裹起来 import React from 'react'; import {useSelector} from \\"react-redux\\"; import {Navigate, useLocation} from \\"react-router-dom\\"; const NeedAuth = props =&gt; { const auth = useSelector(state =&gt; state.auth); //保存当前路径 const location = useLocation(); return auth.isLogged ? props.children : //没有登录就返回到之前的页面 重定向标签 &lt;Navigate to={\\"/auth-form\\"} replace //设置跳转前的路径位置 state={{preLocation: location}} /&gt;; }; export default NeedAuth;"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-03-22T16:11:07.000Z"}],["meta",{"property":"article:published_time","content":"2023-03-22T16:41:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-22T16:11:07.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"1c-NeedAuth\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-22T16:41:00.000Z\\",\\"dateModified\\":\\"2023-03-22T16:11:07.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[]}],"git":{"createdTime":1679501467000,"updatedTime":1679501467000,"contributors":[{"name":"Huxzhi","email":"huxzhi@gmail.com","commits":1}]},"readingTime":{"minutes":0.5,"words":151},"filePathRelative":"code/react/React-demo/1c-NeedAuth.md","localizedDate":"2023年3月22日","excerpt":"<h1> 01c-NeedAuth</h1>\\n<p>简易版的 路由守卫，没有权限就重定向</p>\\n<p>在需要权限的页面，用该组件 包裹起来</p>\\n<div class=\\"language-jsx line-numbers-mode\\" data-ext=\\"jsx\\"><pre class=\\"language-jsx\\"><code><span class=\\"token keyword\\">import</span> React <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">'react'</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token punctuation\\">{</span>useSelector<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">\\"react-redux\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token punctuation\\">{</span>Navigate<span class=\\"token punctuation\\">,</span> useLocation<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">\\"react-router-dom\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">NeedAuth</span> <span class=\\"token operator\\">=</span> <span class=\\"token parameter\\">props</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">const</span> auth <span class=\\"token operator\\">=</span> <span class=\\"token function\\">useSelector</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">state</span> <span class=\\"token operator\\">=&gt;</span> state<span class=\\"token punctuation\\">.</span>auth<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token comment\\">//保存当前路径</span>\\n    <span class=\\"token keyword\\">const</span> location <span class=\\"token operator\\">=</span> <span class=\\"token function\\">useLocation</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n    \\n    <span class=\\"token keyword\\">return</span> auth<span class=\\"token punctuation\\">.</span>isLogged <span class=\\"token operator\\">?</span>\\n        props<span class=\\"token punctuation\\">.</span>children <span class=\\"token operator\\">:</span>\\n        <span class=\\"token comment\\">//没有登录就返回到之前的页面 重定向标签</span>\\n        <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span><span class=\\"token class-name\\">Navigate</span></span>\\n            <span class=\\"token attr-name\\">to</span><span class=\\"token script language-javascript\\"><span class=\\"token script-punctuation punctuation\\">=</span><span class=\\"token punctuation\\">{</span><span class=\\"token string\\">\\"/auth-form\\"</span><span class=\\"token punctuation\\">}</span></span>\\n            <span class=\\"token attr-name\\">replace</span>\\n            <span class=\\"token comment\\">//设置跳转前的路径位置</span>\\n            <span class=\\"token attr-name\\">state</span><span class=\\"token script language-javascript\\"><span class=\\"token script-punctuation punctuation\\">=</span><span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span><span class=\\"token literal-property property\\">preLocation</span><span class=\\"token operator\\">:</span> location<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n        <span class=\\"token punctuation\\">/&gt;</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> NeedAuth<span class=\\"token punctuation\\">;</span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{},"autoDesc":true}`);export{n as data};
