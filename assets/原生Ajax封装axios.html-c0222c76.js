const n=JSON.parse(`{"key":"v-46d9c80c","path":"/posts/permanent-notes/code/%E5%8E%9F%E7%94%9FAjax%E5%B0%81%E8%A3%85axios.html","title":"原生Ajax封装axios","lang":"en-US","frontmatter":{"date":"2023-01-04 15:57","title":"原生Ajax封装axios","tag":["js/ts","code"],"description":"[!NOTE] readyState 状态码 0 - (未初始化)还没有调用 send()方法 1 - (载入)已调用 send()方法，正在发送请求 2 - (载入完成) send()方法执行完成，已经接收到全部响应内容 3 - (交互)正在解析响应内容 4 - (完成)响应内容解析完成,可以在客户端调用了 //原生 Ajax 封装 axios export const axios = { get&lt;T&gt;(url: string): Promise&lt;T&gt; { return new Promise((resolve) =&gt; { const xhr = new XMLHttpRequest() xhr.open('GET', url) xhr.onreadystatechange = () =&gt; { if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) { JSON.parse(xhr.responseText) setTimeout(() =&gt; { resolve(JSON.parse(xhr.responseText)) }, 2000) } } xhr.send(null) }) } }","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://huxzhi.github.io/zh/posts/permanent-notes/code/%E5%8E%9F%E7%94%9FAjax%E5%B0%81%E8%A3%85axios.html"}],["meta",{"property":"og:url","content":"https://huxzhi.github.io/posts/permanent-notes/code/%E5%8E%9F%E7%94%9FAjax%E5%B0%81%E8%A3%85axios.html"}],["meta",{"property":"og:site_name","content":"Huxzhi's blog"}],["meta",{"property":"og:title","content":"原生Ajax封装axios"}],["meta",{"property":"og:description","content":"[!NOTE] readyState 状态码 0 - (未初始化)还没有调用 send()方法 1 - (载入)已调用 send()方法，正在发送请求 2 - (载入完成) send()方法执行完成，已经接收到全部响应内容 3 - (交互)正在解析响应内容 4 - (完成)响应内容解析完成,可以在客户端调用了 //原生 Ajax 封装 axios export const axios = { get&lt;T&gt;(url: string): Promise&lt;T&gt; { return new Promise((resolve) =&gt; { const xhr = new XMLHttpRequest() xhr.open('GET', url) xhr.onreadystatechange = () =&gt; { if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) { JSON.parse(xhr.responseText) setTimeout(() =&gt; { resolve(JSON.parse(xhr.responseText)) }, 2000) } } xhr.send(null) }) } }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-03-02T04:23:32.000Z"}],["meta",{"property":"article:tag","content":"js/ts"}],["meta",{"property":"article:tag","content":"code"}],["meta",{"property":"article:published_time","content":"2023-01-04T15:57:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-02T04:23:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"原生Ajax封装axios\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-01-04T15:57:00.000Z\\",\\"dateModified\\":\\"2023-03-02T04:23:32.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1677731012000,"updatedTime":1677731012000,"contributors":[{"name":"Huxzhi","email":"huxzhi@gmail.com","commits":1}]},"readingTime":{"minutes":0.5,"words":149},"filePathRelative":"posts/permanent-notes/code/原生Ajax封装axios.md","localizedDate":"January 4, 2023","excerpt":"<blockquote>\\n<p>[!NOTE] readyState 状态码\\n0 - (未初始化)还没有调用 send()方法<br>\\n1 - (载入)已调用 send()方法，正在发送请求<br>\\n2 - (载入完成) send()方法执行完成，已经接收到全部响应内容<br>\\n3 - (交互)正在解析响应内容<br>\\n4 - (完成)响应内容解析完成,可以在客户端调用了</p>\\n</blockquote>\\n<div class=\\"language-typescript line-numbers-mode\\" data-ext=\\"ts\\"><pre class=\\"language-typescript\\"><code><span class=\\"token comment\\">//原生 Ajax 封装 axios</span>\\n\\n<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">const</span> axios <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token generic-function\\"><span class=\\"token function\\">get</span><span class=\\"token generic class-name\\"><span class=\\"token operator\\">&lt;</span><span class=\\"token constant\\">T</span><span class=\\"token operator\\">&gt;</span></span></span><span class=\\"token punctuation\\">(</span>url<span class=\\"token operator\\">:</span> <span class=\\"token builtin\\">string</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">:</span> <span class=\\"token builtin\\">Promise</span><span class=\\"token operator\\">&lt;</span><span class=\\"token constant\\">T</span><span class=\\"token operator\\">&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\"><span class=\\"token builtin\\">Promise</span></span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span>resolve<span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">const</span> xhr <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">XMLHttpRequest</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n      xhr<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">open</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'GET'</span><span class=\\"token punctuation\\">,</span> url<span class=\\"token punctuation\\">)</span>\\n\\n      xhr<span class=\\"token punctuation\\">.</span><span class=\\"token function-variable function\\">onreadystatechange</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>xhr<span class=\\"token punctuation\\">.</span>readyState <span class=\\"token operator\\">==</span> <span class=\\"token number\\">4</span> <span class=\\"token operator\\">&amp;&amp;</span> xhr<span class=\\"token punctuation\\">.</span>status <span class=\\"token operator\\">==</span> <span class=\\"token number\\">200</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n          <span class=\\"token constant\\">JSON</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">parse</span><span class=\\"token punctuation\\">(</span>xhr<span class=\\"token punctuation\\">.</span>responseText<span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token function\\">setTimeout</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">resolve</span><span class=\\"token punctuation\\">(</span><span class=\\"token constant\\">JSON</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">parse</span><span class=\\"token punctuation\\">(</span>xhr<span class=\\"token punctuation\\">.</span>responseText<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n          <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2000</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      xhr<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">send</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">null</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{},"autoDesc":true}`);export{n as data};
